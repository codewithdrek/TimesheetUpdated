
#Production
#serverip=103.240.91.77
#serverport=9731
#domain=timesheet.supraes.com


#UAT     
#serverip=103.240.91.78
#serverport=9080
#domain=103.240.91.78:9080


#Demo
#serverip=103.240.91.2
#serverport=8091
#domain=timesheetdemo.midihost.com


#Development
#serverip =localhost
#serverport =8081
#domain = localhost:8081


#UAT
serverip =192.168.3.172
serverport =8082
domain = 192.168.3.172:8082



#Local System
#profileImageDir = D:\\Workspace\\.metadata\\.plugins\\org.eclipse.wst.server.core\\tmp0\\webapps\\profileImages

#UAT SYSTEM
profileImageDir =C:\\Tomcat 8.5\\webapps\\profileImages

#MY SYSTEM TOMACAT
#profileImageDir =D:\\DevInstanceeManager\\ApacheSoftwareFoundation\\Tomcat8.5\\webapps\\profileImages


REST_SERVICE_URI = http://localhost:8010/payroll
plainCredentials = payroll:Welcome1


protocol=http
contextpath=TimesheetManagement
dateformat=yyyy-MM-dd hh:mm:ss
IGdateformat=dd-MMM-yy hh:mm:ss
CalendarDateformat = yyyy-MM-dd'T'HH:mm:ss
Existformat=yyyy-MM-dd
Convertformat=dd-MMM-yy

#Access Functions 
FILL_TIMESHEET=1

#Email_Notification_Action_id
New_Registration=0
User_Registration_By_Admin=1
Timesheet_Approval=2
Timesheet_Rejection=3
Leave_Approval=4
Leave_Rejected=5
Update_User_Status=6
Project_Assigned=7
Password_Change=8
Forgot_Password=9
SAVE_SUBMIT_RMS_REQUEST=10
RMS_REQUEST_STATUS_MODIFIED=11
TIMESHEET_REMINDER=12
NEW_LEAVE_REQUEST=13
LEAVE_REQUEST_INTIMATION_TO_RM=14
LEAVE_REQUEST_INTIMATION_TO_HR=15
LEAVE_REQUEST_STATUS_UPDATE=16
NEW_MOAF_REQUEST=17
MOAF_REQUEST_INTIMATION_TO_RM=18
MOAF_REQUEST_INTIMATION_TO_HR=19
MOAF_REQUEST_STATUS_UPDATE=20
LEAVE_REQUEST_MEETING=21

#Bucket
DOCUMENT_VERIFICATION_PENDING=Document Verification Pending
DOCUMENT_VERIFIED=Document Verified
READY_FOR_PAYEMENT=Ready for payment
PAYMENT_DONE=Payment Completed
PAYMENT_DECLINED=Payment Declined
REQUEST_TO_BE_REVIEW=To be review


#Constant
ORGANIZATION_PROJECT=PSUPRA001
ADMIN_USERNAME=71
ADMIN_MAIL=Admin Supra ITS<timesheet@supraits.com>


LEAVE_TASKID=PSUP7991Leav
FEEDBACK_MAILED_TO=abhinav.gupta@supraits.com
TEST_DELIVERY_MAIL_TO=guptaabhinav29@gmail.com
TEST_DELIVERY_MAIL_TO2=dreksha.chaudhary@supraits.com

#Constant RMS
Review_Pending=Review Pending
Saved_as_Draft=Saved as Draft
Review_Failed=Review Failed
Approval_Pending=Approval Pending
Rejected=Rejected
Approved=Approved
Withdraw=Withdraw
Delete_Request=Deleted
VP_APPROVAL_PENDING=VP Approval Pending
VP_APPROVAL_FAILED=VP Approval Failed


#Group
ADMIN=1
Approver=4
Project_Manager=5
USER=8
FINANACE=3
VP_GROUP=9
HR=2
CANADA_ADMIN=12
CANADA_HR=14

MODIFY_USER=11
#Query list Access Management
AM1=select f.functionid,f.functionname,m.moduleid,m.modulename,mf.groupid from supra_module_function f left join supra_app_module m on f.moduleid = m.moduleid left join supra_accessgroup_modulefunction_mapping mf on f.functionid = mf.functionid order by m.modulename asc

#Query List Reimbursement

RMS1=select RequestNumber from supra_rms_request where username='$1' order by requestnumber desc limit 1 
RMS2=INSERT INTO supra_rms_request (RequestNumber, username, createdOn, createdby, requestedAmount, approvedAmount, `status`, lastmodifiedby, lastmodifiedon,bucketid) VALUES ('$1', '$2', '$3', '$4', '$5', '$6', '$7', '$8', '$9','$10')
RMS3=INSERT INTO supra_rms_request_mapping (RequestNumber, expenseCode, expenseDesc, BillNumber, BillDate, createdOn, LastModifiedOn, requestAmount, approvedAmount, billAmount, applicantRemark,attachment,projectname) VALUES ('$1', '$2', '$3', '$4', '$5', '$6', '$7', '$8', '$9', '$10', '$11','$12','$13')
RMS4=INSERT INTO supra_rms_document (RequestNumber, docName, expenseCode, uploadedby, uploadedon, docFlag,docCaption) VALUES ('$1', '$2', "$3", '$4', '$5','$6','$7')
RMS5=select expensecode,name from supra_rms_type order by name
RMS6=select r.username,concat_ws(' ', u.firstname, u.lastname) as fullname,r.requestnumber,r.createdon,r.requestedamount,r.approvedamount,u.reportingmanager,r.status,r.reviewerremark,r.approverremark,r.bucketid from supra_rms_request r, user u where r.username=u.username and r.lastmodifiedon <= '$1' and r.status='$2' and u.reportingmanager='$3' group by r.requestnumber order by r.lastmodifiedon asc
RMS7=SELECT m.expenseCode, t.Name,m.billdate, m.requestAmount, m.approvedAmount, m.applicantRemark,m.billnumber,m.billamount,m.attachment,m.projectname FROM supra_rms_request_mapping m left join supra_rms_type t on m.expenseCode=t.expenseCode where m.requestnumber='$1'
RMS8=UPDATE supra_rms_request SET status='$1', lastmodifiedby='$2',lastmodifiedon='$3',reviewerRemark='$4' WHERE requestnumber='$5'
RMS9=UPDATE supra_rms_request SET status='$1', lastmodifiedby='$2',lastmodifiedon='$3',approverRemark='$4',bucketid='$5' WHERE requestnumber='$6'
RMS10=UPDATE supra_rms_request SET status='$1', lastmodifiedby='$2',lastmodifiedon='$3' WHERE requestnumber='$4' and username='$5'
RMS11=select value from timesheet_parameter where category='RMSCycleEndDate'
RMS12=select r.username,concat_ws(' ', u.firstname, u.lastname) as fullname,r.requestnumber,r.createdon,r.requestedamount,r.approvedamount,u.reportingmanager,r.status,r.reviewerremark,r.approverremark,r.bucketid from supra_rms_request r, user u where r.username=u.username and r.status !='Deleted' and r.username='$1' group by r.requestnumber order by r.lastmodifiedon desc
RMS13=select status from supra_rms_request where requestnumber='$1'
RMS14=(select r.username,concat_ws(' ', u.firstname, u.lastname) as fullname,r.requestnumber,r.createdon,r.requestedamount,r.approvedamount,u.reportingmanager,r.status,r.reviewerremark,r.approverremark,r.bucketid from supra_rms_request r, user u where r.username=u.username and r.lastmodifiedon <= '$1' and r.status='$2' group by r.requestnumber order by r.lastmodifiedon asc) union (select r.username,concat_ws(' ', u.firstname, u.lastname) as fullname,r.requestnumber,r.createdon,r.requestedamount,r.approvedamount,u.reportingmanager,r.status,r.reviewerremark,r.approverremark,r.bucketid from supra_rms_request r, user u where r.username=u.username and r.lastmodifiedon <= '$3' and r.status='$4' and u.reportingmanager='$5' group by r.requestnumber order by r.lastmodifiedon asc)
RMS15=SELECT RequestNumber, username, createdOn, createdby, requestedAmount, approvedAmount, `status`, reviewerRemark, approverRemark FROM supra_rms_request where RequestNumber = '$1' and username='$2'
RMS16=SELECT m.expenseCode,m.BillNumber,m.requestAmount,m.approvedAmount,m.billAmount,m.expenseDesc,m.BillDate,m.applicantRemark,t.Name,m.attachment,m.projectname FROM supra_rms_request_mapping m left join supra_rms_document d on m.RequestNumber=d.requestnumber and m.expenseCode=d.expenseCode and d.docflag='Y' left join supra_rms_type t on m.expenseCode=t.expenseCode  where m.requestNumber = '$1'
RMS17=SELECT docCaption, docId, docName, docSize, uploadedby, uploadedon, docFlag, doctype, document FROM supra_rms_document where requestnumber='$1' and expensecode='$2' and docFlag='Y'
RMS18=select count(1) from supra_rms_request where requestnumber='$1'
RMS19=DELETE t1, t2 FROM supra_rms_request t1 INNER JOIN supra_rms_request_mapping t2 WHERE t1.requestnumber=t2.requestnumber  and t1.RequestNumber='$1'
RMS20=select count(1) from supra_rms_document where requestnumber='$1' and expensecode='$2' and docFlag='Y'
RMS21=SELECT t.expenseCode, t2.name,t.expenseDesc, t.BillDate, t.approvedAmount,d.docflag,t.projectname FROM supra_rms_request_mapping t left join supra_rms_type t2 on t.expenseCode =t2.expenseCode left join supra_rms_document d on t.requestnumber =d.requestnumber and t.expenseCode =d.expenseCode where t.requestnumber='$1'
RMS22=update supra_rms_document set docFlag='N' where requestnumber='$1' and expensecode='$2'
RMS23=select r.username,concat_ws(' ', u.firstname, u.lastname) as fullname,r.requestnumber,r.createdon,r.requestedamount,r.approvedamount,u.reportingmanager,r.status,r.reviewerremark,r.approverremark,b.name from supra_rms_request r left join user u on r.username=u.username left join supra_rms_bucket b on r.bucketid=b.bucketid where r.bucketid ='$1' order by r.lastmodifiedon asc
RMS24=update supra_rms_request set bucketid='$1' where requestnumber='$2'
RMS25=SELECT bucketId, name, createdby, createdOn FROM supra_rms_bucket where activeflag='Y'
RMS26=SELECT b.accountholdername  , sum(r.approvedAmount),GROUP_CONCAT(r.RequestNumber SEPARATOR ' '),b.AccountNo,b.ifsc FROM supra_emp_bank_account b  RIGHT JOIN supra_rms_request r ON concat(b.username,'+',b.primaryaccount)=concat(r.username,'+','Y') and b.username = r.username where r.bucketid='$1' and r.bucketid is not null group by r.username order by b.accountholdername
RMS27=UPDATE supra_rms_bucket SET activeFlag='N' WHERE bucketid='$1'
RMS28=UPDATE supra_rms_bucket SET name='$1' WHERE bucketid='$2'
RMS29=INSERT INTO supra_rms_bucket (name, createdby, createdOn, activeFlag) VALUES ('$1', '$2', '$3', 'Y')
RMS30=select count(1) from supra_rms_request where bucketid='$1'
RMS31=UPDATE supra_rms_request SET status='$1', lastmodifiedby='$2',lastmodifiedon='$3',vpRemark='$4',bucketid ='0' WHERE requestnumber='$5'
RMS32=select r.username,concat_ws(' ', u.firstname, u.lastname) as fullname,r.requestnumber,r.createdon,r.requestedamount,r.approvedamount,u.reportingmanager,r.status,r.reviewerremark,r.approverremark,r.bucketid from supra_rms_request r, user u where r.username=u.username and r.lastmodifiedon <= '$1' and r.status='$2' group by r.requestnumber order by r.lastmodifiedon asc
RMS33=INSERT INTO supra_rms_action_history (actionName, requestNumber, username, actionby,  remark,assignedto) VALUES ('$1', '$2', '$3', '$4','$5','$6')
RMS34=select count(1) from supra_rms_approver_list where userorgroup='$1' and currentassignflag='Y' and currentassigneetype='U'
RMS35=select(select count(1) from supra_rms_request m , user u where u.username=m.username and m.status='Review Pending' and u.reportingmanager='$1')+(select count(1) from supra_rms_request m , user u where u.username=m.username and m.status='$2') as count
RMS36=update supra_rms_request_mapping set attachment='NA' where requestnumber='$1' and expensecode='$2'
RMS37=select CASE WHEN actionname REGEXP $1 THEN (select name from supra_rms_bucket where bucketid=actionname) ELSE actionname END AS `action` ,concat_ws(' ', u.firstname, u.lastname) as fullname,addedon,r.remark,actionid,assignedto from supra_rms_action_history r,user u where r.actionby=u.username and requestnumber='$2' order by addedon desc
RMS38=select username from supra_rms_request where requestnumber='$1' 
RMS39=select r.username,concat_ws(' ', u.firstname, u.lastname) as fullname,r.requestnumber,r.createdon,r.requestedamount,r.approvedamount,u.reportingmanager,r.status,r.reviewerremark,r.approverremark,b.name from supra_rms_request r left join user u on r.username=u.username left join supra_rms_bucket b on r.bucketid=b.bucketid where r.status='$1' and r.bucketid is not null order by r.lastmodifiedon asc
RMS40=select r.RequestNumber,r.username,concat_ws(' ', u.firstname, u.lastname) as fullname,r.approvedAmount from  supra_rms_request r left join user u on r.username=u.username where r.bucketid='$1' order by fullname
RMS41=update supra_rms_request set processeddate='$1',bankrefnumber='$2',bucketid='$3',reassignflag='N' where requestnumber='$4'
RMS42=select bucketid from supra_rms_request where requestnumber='$1'
RMS43=select u.primaryemail from supra_accessgroup_user_mapping g left join user u on g.username=u.username where groupid='$1'
RMS44=INSERT INTO supra_rms_approver_list (`level`, requestNumber, username, userorgroup,status,currentassignflag,lastmodifiedon,currentassigneetype) VALUES ('$1', '$2', '$3', '$4', '$5', '$6','$7','$8')
RMS45=select approvedamount from supra_rms_request where requestnumber='$1' limit 1
RMS46=select "UReview Pending" as status,reportingmanager from user where username='$1' union select "GVP Approval Pending",groupid as grp from supra_access_group where groupid='9' and not exists (select * from supra_accessgroup_user_mapping where groupid='9' and username = (select reportingmanager from user where username='$2')) union select "GApproval Pending",groupid as grp from supra_access_group where groupid='3' and not exists (select * from supra_accessgroup_user_mapping where groupid='3' and username = (select reportingmanager from user where username='$3'))
RMS47=(select r.username,concat_ws(' ', u.firstname, u.lastname) as fullname,r.requestnumber,r.createdon,r.requestedamount,r.approvedamount,u.reportingmanager,r.status,r.reviewerremark,r.approverremark,r.bucketid from supra_rms_request r, user u where r.username=u.username and r.lastmodifiedon <= '$1' and r.requestnumber in (select requestnumber from supra_rms_approver_list where userorgroup='$2' and currentassignflag='Y' and currentassigneetype='$3') group by r.requestnumber order by r.lastmodifiedon asc)
RMS48=select level from supra_rms_approver_list where requestnumber='$1' and currentassignflag='Y' limit 1
RMS49=select status from supra_rms_approver_list where requestnumber='$1' and level='$2' limit 1
RMS50=UPDATE supra_rms_approver_list SET currentassignflag = (CASE WHEN status in ('$1') THEN 'Y' ELSE 'N' END) where requestnumber='$2'
RMS51=delete from supra_rms_approver_list where requestnumber='$1' and username='$2'
RMS52=delete from supra_rms_approver_list where requestnumber='$1'
RMS53=select username from supra_rms_request where requestnumber='$1' limit 1
RMS54=select count(r.bucketid),name,b.bucketid from supra_rms_bucket b left join supra_rms_request r on b.bucketId=r.BucketId where b.activeFlag='Y' group by b.bucketid order by name
RMS55=select concat_ws(' ', firstname, lastname) as fullname from supra_accessgroup_user_mapping m,user u where m.username=u.username and groupid='$1' order by fullname
RMS56=select distinct(status) from supra_rms_request order by status
RMS57=select concat_ws(' ', u.firstname, u.lastname) as fullname,concat_ws(' ', u2.firstname, u2.lastname) as rmname,r.requestedAmount,r.approvedAmount,r.status,b.name,r.lastmodifiedon,concat_ws(' ', u3.firstname, u3.lastname) as lastmodifiedby,r.createdOn,r.RequestNumber from supra_rms_request r,user u,user u2,user u3,supra_rms_bucket b,supra_rms_request_mapping m where r.username=u.username and r.BucketId=b.bucketId and u.reportingManager=u2.username and r.requestnumber=m.requestnumber and r.lastmodifiedby=u3.username and r.createdOn between '$1' and '$2' $3 group by r.requestnumber order by fullname,r.createdOn
RMS58=select u.username,concat_ws(' ', u.firstname, u.lastname) as fullname,u.primaryemail as mail,concat_ws(' ', u2.firstname, u2.lastname) as rmname,u2.primaryemail as rmmail,t.Name,m.projectName,m.expenseDesc,m.BillDate,m.billAmount,m.approvedAmount,m.createdOn,m.applicantRemark,case when m.attachment='NA' then 'N' else 'Y' end as billflag,r.status,m.requestnumber from supra_rms_request_mapping m,supra_rms_request r,supra_rms_type t,user u,user u2 where m.RequestNumber=r.RequestNumber and r.username=u.username and u.reportingManager=u2.username and m.expenseCode=t.expenseCode and m.RequestNumber in ( :reqIds ) order by fullname asc,m.requestnumber asc,m.createdon asc
RMS59=select distinct(projectName) from supra_rms_request_mapping order by projectname;
RMS60=select r.username,concat_ws(' ', u.firstname, u.lastname) as fullname,r.requestnumber,r.createdon,r.requestedamount,r.approvedamount,u.reportingmanager,r.status,r.reviewerremark,r.approverremark,r.bucketid from supra_rms_request r, user u where r.username=u.username and r.status !='Deleted' and r.requestnumber in (select distinct(s.requestNumber) from supra_rms_action_history s,supra_rms_action_history h  where s.requestnumber=h.requestnumber and s.actionby='$1' and s.username != '$2' and s.assignedto != h.username) group by r.requestnumber order by r.lastmodifiedon desc
RMS61=select r.username,concat_ws(' ', u.firstname, u.lastname) as fullname,r.requestnumber,r.createdon,r.requestedamount,r.approvedamount,u.reportingmanager,r.status,r.reviewerremark,r.approverremark,r.bucketid from supra_rms_request r, user u where r.username=u.username and r.status !='Deleted' and r.requestnumber in (select distinct(s.requestNumber) from supra_rms_action_history s,supra_rms_action_history h  where s.requestnumber=h.requestnumber and s.actionby='$1' and s.username != '$2' and s.assignedto = h.username) group by r.requestnumber order by r.lastmodifiedon desc
RMS62=select count(1) from supra_rms_approver_list where userorgroup='$1' and currentassignflag='Y' and currentassigneetype='G'

#Query List Timesheet
TM1=select count(1) from user where primaryemail='$1'
TM2=select timesheetstatus from user_task_mapping_table where taskid='$1' and projectid='$2' and username = '$3' and timesheetdate = '$4'
TM3=delete from user_task_mapping_table where taskid='$1' and username = '$2' and timesheetdate = '$3'
TM4=select count(*) from user_task_mapping_table where taskid='$1' and projectid='$2' and username = '$3' and timesheetdate = '$4'
TM5=INSERT INTO user_task_mapping_table (projectid,taskid, username, timesheetdate, effortinhours, remark, lastmodifieddate, timesheetstatus, lastmodifiedby, lastmodifiedon,submitStatus) VALUES ('$1','$2', '$3', '$4', '$5', '$6', '$7', '$8', '$9','$10','$11')
TM6=select username,sum(effortinhours),timesheetstatus from user_task_mapping_table where username in (select username from user where reportingmanager='$1') and submitstatus='true' and timesheetdate between '$2' and '$3' and timesheetstatus='$4' group by username
TM7=select username,sum(effortinhours),timesheetstatus from user_task_mapping_table where username in (select username from user where reportingmanager='$1') and submitstatus='true' and timesheetdate between '$2' and '$3' group by username
TM8=select username,sum(effortinhours),timesheetstatus from user_task_mapping_table where username in (select username from user where reportingmanager='$1') and submitstatus='true' and timesheetdate between '$2' and '$3' and timesheetstatus='$4' and username like '%$5%' group by username
TM9=select username,sum(effortinhours),timesheetstatus from user_task_mapping_table where username in (select username from user where reportingmanager='$1') and submitstatus='true' and timesheetdate between '$2' and '$3' and username like '%$4%' group by username
TM10=update user set password = '$1' where username = '$2' and password = '$3'
TM11=select primaryemail from user where username='$1'
TM12=update task_story_table set deleteFlag='Y' where taskid='$1' and projectid='$2'
TM13=INSERT INTO user (username, password, firstname, lastname, role, primaryemail, remark, usergroup, userstatus, dob, creationdate, lastmodifieddate, reportingManager,hrmanager,policygroup) VALUES ('$1', '$2', '$3', '$4', '$5', '$6', '$7', '$8', '$9', '$10', '$11', '$12', '$13','$14','$15')
TM14=SELECT groupid, groupname, createdby, createdon,lastmodifiedon,(select concat_ws(' ',firstname,lastname) from supra_emp where username=createdby),(select usercode from user where username=createdby) FROM supra_access_group where activeflag='Y' order by groupname
TM15=select value from timesheet_parameter where category='User Status' 
TM16=SELECT  username,SUM(effortinhours) AS WeekEffort,timesheetstatus,CONCAT(timesheetdate, '-', timesheetdate + INTERVAL 6 DAY) AS week FROM user_task_mapping_table where username in (select username from user where reportingmanager='$1') and timesheetstatus='$2' GROUP BY username,WEEK(timesheetdate) ORDER BY WEEK(timesheetdate)
TM17=SELECT  username,SUM(effortinhours) AS WeekEffort,timesheetstatus,CONCAT(timesheetdate, '-', timesheetdate + INTERVAL 6 DAY) AS week FROM user_task_mapping_table where username in (select username from user where reportingmanager='$1') GROUP BY username,WEEK(timesheetdate) ORDER BY WEEK(timesheetdate)
TM18=update project_table set startdate='$1',enddate='$2',projectstatus='$3',timesheetApprover='$4',projectOwner='$5' where projectid = '$6'
TM19=UPDATE task_story_table SET Taskname='$1', Taskdesc='$2',criticality='$3', actualstartdate='$4', actualenddate='$5',taskstatus='$6' WHERE taskid='$7'
TM20=delete from user_task_mapping_table where username = '$1' and timesheetdate between '$2' and '$3'
TM21=select concat_ws(' ', firstname, lastname) as fullname from user where username='$1' limit 1
TM22=select projectname from project_table where projectId='$1' order by projectName
TM23=select taskName from task_story_table where taskid='$1'
TM24=select timesheetDate,effortinhours from user_task_mapping_table where username='$1' and taskid = '$2' and timesheetstatus='Approved' and timesheetdate between '$3' and '$4' order by timesheetdate asc
TM25=select distinct(username) from user_task_mapping_table where taskid='$1'
TM26=select taskid from task_story_table where projectid='$1'
TM27=select taskid from task_story_table where projectid in (select distinct projectid from user_task_mapping_table where projectid='$1' and username='$2')
TM28=select distinct(taskid) from user_task_mapping_table where username='$1' and timesheetdate between '$2' and '$3' order by timesheetdate asc, timesheetstatus asc
TM29=select projectid,taskid,timesheetDate,effortinhours,submitStatus,remark,approverRemark,timesheetstatus from user_task_mapping_table where username='$1' and taskId = '$2' and timesheetdate between '$3' and '$4' order by timesheetdate asc
TM30=select projectid from project_table
TM31=select projectid from user_project_mapping_table where username='$1'
TM32=select p1.projectid,p1.projectname from project_table p1 join user_project_mapping_table p2 on p1.projectid=p2.projectid where username='$1' order by p2.assigneddate desc
TM33=select taskId,taskname from task_story_table where taskstatus='Active' and projectid = '$1'
TM34=select projectid,projectname from project_table
TM35=select u1.username,concat_ws(' ', u1.firstname, u1.lastname) as fullname from user u1 join user_project_mapping_table p1 on p1.username=u1.username and p1.projectid = '$1' order by fullname
TM36=select username,concat_ws(' ', firstname, lastname) as fullname from user order by fullname asc
TM37=select projectid from user_project_mapping_table where username='$1' and assignFlag='Y'
TM38=update user_task_mapping_table set timesheetstatus = '$1',submitStatus='true',lastmodifieddate = '$2',lastmodifiedby = '$3' where username = '$4' and timesheetdate between '$5' and '$6'
TM39=update user_task_mapping_table set timesheetstatus = '$1',submitStatus='false',lastmodifieddate = '$2',lastmodifiedby = '$3' where username = '$4' and timesheetdate between '$5' and '$6'
TM40=select username from user
TM41=select value from timesheet_parameter where category='Project Status' order by value
TM42=select value from timesheet_parameter where category='$1' order by value
TM43=SELECT t.TaskId, Taskname, TaskType, Taskdesc, CreationDate, Effortestimation, plannedstartdate,actualstartdate, plannedenddate, actualenddate, taskstatus, t.lastModifiedBy, t.lastmodifieddate, criticality,a.username,a.assignflag FROM task_story_table t left join supra_user_assigned_task a on t.TaskId=a.taskid where deleteFlag='N' and projectid='$1'
TM44=select distinct(taskid) from user_task_mapping_table where username='$1' and timesheetdate between '$2' and '$3' order by timesheetdate asc
TM45=select projectid,taskid,timesheetDate,effortinhours,timesheetstatus,remark,username,approverRemark from user_task_mapping_table where username='$1' and taskId = '$2' and timesheetdate between '$3' and '$4' order by timesheetdate asc
TM46=INSERT INTO project_table (ProjectId, ProjectName, Projectdesc, CreationDate, ProjectOwner, Projecttype, projectstatus,startdate,enddate) VALUES ('$1', '$2', '$3', '$4','$5', '$6', 'Active','$7','$8')
TM47=SELECT ProjectId, ProjectName, Projectdesc, CreationDate, ProjectOwner, Projecttype, projectstatus, startdate, enddate FROM project_table where projectstatus='$1' order by projectname
TM48=SELECT p.ProjectId, p.ProjectName, p.Projectdesc, p.CreationDate,concat_ws(" ", a.firstname,a.lastname) as username,p.Projecttype, p.projectstatus, p.startdate, p.enddate FROM project_table p ,user a where p.ProjectOwner=a.username and p.projectstatus='$1' order by p.projectname
TM49=INSERT INTO task_story_table (TaskId, Taskname, TaskType, Taskdesc, Projectid, CreationDate, taskstatus, lastModifiedBy, lastmodifieddate, criticality,plannedstartdate,plannedenddate,actualstartdate,actualenddate) VALUES ('$1', '$2', '$3', '$4', '$5', '$6', '$7', '$8', '$9', '$10','$11','$12','$13','$14')
TM50=SELECT username, firstname, lastname, role, primaryemail FROM user where userstatus='Active' and username in (select username from user_project_mapping_table where projectid='$1'and assignFlag='Y')
TM51=SELECT username, firstname, lastname, role, primaryemail FROM user where userstatus='Active' and username not in (select username from user_project_mapping_table where projectid='$1' and assignFlag='Y')
TM52=select username from user where primaryemail='$1'
TM53=SELECT ProjectName, Projectdesc, CreationDate, ProjectOwner, Projecttype, projectstatus,startdate, enddate,timesheetApprover	FROM project_table where projectid = '$1'
TM54=select username, firstname, lastname, role, primaryemail, usergroup, userstatus, dob, creationdate, lastmodifieddate from user where username in (select username from user_project_mapping_table where projectid='$1' and assignFlag='Y')
TM55=update user_task_mapping_table set approverRemark = '$1',lastmodifieddate = '$2',lastmodifiedby = '$3' where username = '$4' and timesheetdate between '$5' and '$6'
TM56=update user set password='$1' where primaryemail='$2'
TM57=delete from user_task_mapping_table where projectid = '$1' and taskid  = '$2' and username = '$3' and timesheetdate between '$4' and '$5'
TM58=select username,concat_ws(' ', firstname, lastname) as fullname from user where reportingManager='$1'
TM59=SELECT username, firstname, lastname, primaryemail FROM user where policygroup in (select policygroup from user where username = '$1') and userstatus='Active' and (usergroup like '%Admin%' or usergroup='Project Owner' or usergroup like '%Approver%' or usergroup like '%Manager%' )
TM60=update user_project_mapping_table set assignFlag='N' where projectid='$1' and username = '$2'
TM61=select value from timesheet_parameter where category='Task Type'
TM62=INSERT INTO user_project_mapping_table (projectid, username, assigneddate, assignedby) VALUES ('$1', '$2','$3', '$4')
TM63=UPDATE user SET role='$1',usergroup='$2',userstatus='$3',lastmodifieddate='$4',remark ='$5',reportingmanager='$6',hrmanager='$7' WHERE username='$8'
TM64=INSERT INTO user_project_mapping_table (projectid, username, assigneddate, assignedby) values ('$1','$2','$3','$4')
TM65=select t.timesheetdate, dayname(t.timesheetdate) as weekDayName ,GROUP_CONCAT(t1.taskname),sum(t.effortinhours) as DayEffort,remark,day(t.timesheetdate) as dayNum from user_task_mapping_table t, task_story_table t1 where t.taskid=t1.taskid and t.username='$1' and (t.projectid='$2' or t.projectid='PSUPRA001') and t.timesheetdate between '$3' and '$4' and t.effortinhours > 0 group by t.timesheetdate order by t.timesheetdate asc
TM66=select count(1) from SUPRA_TMS_HOLIDAYS where holidaydate = '$1';
TM67=select concat_ws(' ', firstname, lastname) as fullname from user where username = (select reportingmanager from user where username = '$1')
TM68=select concat_ws(' ', firstname, lastname) as fullname from user where username = (select projectowner from project_table where projectid='$1')
TM69=select projectid,projectname from project_table where projectid in (select distinct projectid from user_task_mapping_table where username='$1') 
TM70=SELECT DATE_FORMAT(assigneddate, '%d %m %Y') AS your_date from user_project_mapping_table where projectid='$1' and username='$2' 
TM71=select count(1) from user_project_mapping_table where projectid='$1' and username='$2'
TM72=update user_project_mapping_table set assignFlag='Y',assigneddate='$1',assignedby ='$2' where projectid='$3' and username='$4'
TM73=select t.actiontype,t.addedon,concat_ws(" ", a.firstname,a.lastname) as modifiedby,t.remark from SUPRA_TMS_ACTION_HISTORY t, user a where t.lastmodifiedby=a.username and t.username='$1' and t.startdate='$2' and t.enddate='$3'
TM74=INSERT INTO supra_tms_action_history (actiontype, username, lastmodifiedby, remark, addedOn, enddate, startdate) VALUES ('$1', '$2', '$3', '$4', '$5', '$6', '$7')
TM75=select t.timesheetdate, dayname(t.timesheetdate) as weekDayName ,GROUP_CONCAT(t1.taskname),sum(t.effortinhours) as DayEffort,remark,day(t.timesheetdate) as dayNum from user_task_mapping_table t, task_story_table t1 where t.taskid=t1.taskid and t.username='$1' and t.projectid='$2' and t.timesheetdate between '$3' and '$4' and t.effortinhours > 0 group by t.timesheetdate order by t.timesheetdate asc
TM76=SELECT username,SUM(effortinhours) AS WeekEffort,timesheetstatus,CONCAT(timesheetdate, '-', timesheetdate + INTERVAL 6 DAY) AS week FROM user_task_mapping_table where username in (select username from user) and timesheetstatus='$1' GROUP BY username,WEEK(timesheetdate) ORDER BY WEEK(timesheetdate)
TM77=SELECT username,SUM(effortinhours) AS WeekEffort,timesheetstatus,CONCAT(timesheetdate, '-', timesheetdate + INTERVAL 6 DAY) AS week FROM user_task_mapping_table where username in (select username from user) GROUP BY username,WEEK(timesheetdate) ORDER BY WEEK(timesheetdate)
TM78=select eventid,eventname,triggerFlag,modulename from supra_tms_email_event_trigger t,supra_app_module m where t.Moduleid=m.moduleid order by modulename asc
TM79=update supra_tms_email_event_trigger set triggerFlag='$1',lastmodifiedon='$2',lastmodifiedby='$3' where eventid='$4'
TM80=select triggerFlag from supra_tms_email_event_trigger where eventid='$1'
TM81=select sum(effortinhours),WEEK(`timesheetdate`) as week,CONCAT(timesheetdate, '-', timesheetdate + INTERVAL 6 DAY) as weekdates,timesheetstatus,lastmodifiedon from user_task_mapping_table where username='$1' group by concat(year(timesheetdate),'/',week(DATE_ADD(timesheetdate, INTERVAL(1-DAYOFWEEK(timesheetdate)) DAY))) order by weekdates desc limit 5
TM82=SELECT username, firstname, lastname, primaryemail FROM user where userstatus='Active' and (role='HR' or usergroup='Admin')
TM83=select password from user where primaryemail='$1'
TM84=select password from user where username='$1'
TM85=select usergroup from user where primaryemail='$1'
TM86=select usergroup from user where username='$1'
TM111= select * from supra_accessgroup_user_mapping  where username='$1'
TM87=select count(1) from user where primaryemail='$1' and (reportingmanager='$2' or hrmanager='$2')
TM88=select count(1) from user where primaryemail='$1' and (reportingmanager='(select username from user where primaryemail='$2')' or hrmanager='(select username from user where primaryemail='$2')')
TM89=Select role,usergroup,userstatus,username,primaryemail,firstname,lastname,reportingmanager,hrmanager,accountunit,baselocation,designation,department,policygroup,usercode from user where primaryemail='$1'
TM90=select timesheetdate from user_task_mapping_table where username='$1' and taskid='$2' and timesheetdate between '$3' and '$4'
TM91=select primaryemail from user where username=(select hrmanager from user where username='$1')
TM92=select projectdesc from project_Table where projectid='$1'
TM93=select timesheetApprover from project_Table where projectid='$1'
TM94=select concat_ws(" ", a.firstname,a.lastname) as username, a.primaryemail, concat_ws(" ", b.firstname,b.lastname) as reportingmanagername, b.primaryemail reprtingmanageremail, CONCAT(t.timesheetdate, '-', t.timesheetdate + INTERVAL 6 DAY) as weekdates, t.timesheetstatus from user_task_mapping_table t,user a, user b where t.username=a.username and a.reportingmanager = b.username and t.timesheetdate between '$1' and '$2' and t.username='$3' and t.timesheetstatus='$4' group by t.username,WEEK(DATE_ADD(t.timesheetdate, INTERVAL(1-DAYOFWEEK(t.timesheetdate)) DAY)) order by weekdates
TM95=select concat_ws(" ", a.firstname,a.lastname) as username, a.primaryemail, concat_ws(" ", b.firstname,b.lastname) as reportingmanagername, b.primaryemail reprtingmanageremail, CONCAT(t.timesheetdate, '-', t.timesheetdate + INTERVAL 6 DAY) as weekdates, t.timesheetstatus from user_task_mapping_table t,user a, user b where t.username=a.username and a.reportingmanager = b.username and t.timesheetdate between '$1' and '$2' group by t.username,WEEK(DATE_ADD(t.timesheetdate, INTERVAL(1-DAYOFWEEK(t.timesheetdate)) DAY)) UNION ALL select concat_ws(" ", a.firstname,a.lastname) as username, a.primaryemail, concat_ws(" ", b.firstname,b.lastname) as reportingmanagername,b.primaryemail reprtingmanageremail, CONCAT(t.timesheetdate, '-', t.timesheetdate + INTERVAL 6 DAY) as weekdates, t.timesheetstatus FROM   user b,user a left JOIN user_task_mapping_table t ON a.username = t.username WHERE t.username IS NULL and a.reportingmanager = b.username order by username
TM96=select concat_ws(" ", a.firstname,a.lastname) as username, a.primaryemail, concat_ws(" ", b.firstname,b.lastname) as reportingmanagername, b.primaryemail reprtingmanageremail, CONCAT(t.timesheetdate, '-', t.timesheetdate + INTERVAL 6 DAY) as weekdates, t.timesheetstatus from user_task_mapping_table t,user a, user b where t.username=a.username and a.reportingmanager = b.username and t.timesheetdate between '$1' and '$2' and t.username='$3' group by t.username,WEEK(DATE_ADD(t.timesheetdate, INTERVAL(1-DAYOFWEEK(t.timesheetdate)) DAY)) order by weekdates
TM97=select concat_ws(" ", a.firstname,a.lastname) as username, a.primaryemail, concat_ws(" ", b.firstname,b.lastname) as reportingmanagername, b.primaryemail reprtingmanageremail, CONCAT(t.timesheetdate, '-', t.timesheetdate + INTERVAL 6 DAY) as weekdates, t.timesheetstatus from user_task_mapping_table t,user a, user b where t.username=a.username and a.reportingmanager = b.username and t.timesheetdate between '$1' and '$2' and t.timesheetstatus='$3' group by t.username,WEEK(DATE_ADD(t.timesheetdate, INTERVAL(1-DAYOFWEEK(t.timesheetdate)) DAY)) order by weekdates
TM98=select count(1) from user where '$1' >= joiningdate  and (lastWorkingDate > '$2' or lastWorkingDate is null) and primaryemail='$3'
TM99=select CONCAT(timesheetdate, '-', timesheetdate + INTERVAL 6 DAY) as weekdates from user_task_mapping_table where timesheetdate between '$1' and '$2' group by concat(year(timesheetdate),'/',week(DATE_ADD(timesheetdate, INTERVAL(1-DAYOFWEEK(timesheetdate)) DAY))) order by weekdates asc
TM100=select concat_ws(" ", a.firstname,a.lastname) as username from user
TM101=select value from timesheet_parameter where category='Task Status'
TM102=select value from timesheet_parameter where category='Criticality'
TM103=select count(lastWorkingDate) from user where lastWorkingDate < '$1' and primaryemail='$2'
TM104=select startdate from project_table where projectid='$1'
TM105=select enddate from project_table where projectid='$1'
TM106=SELECT p.ProjectId, p.ProjectName, p.Projectdesc, p.CreationDate,concat_ws(" ", a.firstname,a.lastname) as username,p.Projecttype, p.projectstatus, p.startdate, p.enddate FROM project_table p ,user a where p.ProjectOwner=a.username and p.projectstatus='$1' and p.projectowner='$2' order by p.projectname
TM107=Select role,usergroup,userstatus,username,primaryemail,firstname,lastname,reportingmanager,hrmanager,accountunit,baselocation,designation,department,policygroup,usercode from user where username='$1'
TM108=INSERT INTO supra_tms_feedback (id,type, description, addedby, addedon, module, attachmentname) VALUES ('$1', '$2', '$3', '$4', '$5', '$6','$7')
TM109=UPDATE supra_access_group SET activeFlag='N' WHERE groupid='$1'
TM110=UPDATE supra_access_group SET groupname='$1' WHERE groupid='$2'
TM111=INSERT INTO supra_access_group (groupname, createdby, createdOn, activeFlag) VALUES ('$1', '$2', '$3', 'Y')
TM112=select count(1) from supra_accessgroup_user_mapping where groupid='$1'
TM113=select distinct(u.username),concat_ws(" ", u.firstname,u.lastname) as userfullname, u.primaryemail from user u left join supra_accessgroup_user_mapping g on u.username=g.username where u.username  not in (select username from supra_accessgroup_user_mapping where groupid='$1') order by userfullname
TM114=select distinct(u.username),concat_ws(" ", u.firstname,u.lastname) as userfullname, u.primaryemail from user u right join supra_accessgroup_user_mapping g on u.username=g.username where g.groupid='$1'order by userfullname
TM115=insert into supra_accessgroup_user_mapping (groupid, username) values('$1','$2')
TM116=delete from supra_accessgroup_user_mapping where groupid='$1'
TM117=select m.moduleid,m.modulename,f.functionid,f.functionname,a.groupid from supra_app_module m left join supra_module_function f on m.moduleid=f.moduleid left join supra_accessgroup_modulefunction_mapping a on f.functionid=a.functionid and a.groupid ='$1' or a.groupid is null order by m.modulename,m.moduleid
TM118=delete from supra_accessgroup_modulefunction_mapping where groupid='$1' and functionid='$2' 
TM119=insert into supra_accessgroup_modulefunction_mapping (groupid,functionid) values('$1','$2') 
TM120=select groupid from supra_accessgroup_user_mapping where username='$1'
TM121=select functionid from supra_accessgroup_modulefunction_mapping where groupid='$1'
TM122=select functionid from supra_module_function
TM123=select primaryemail,username,dob from user where userstatus='Active' and policyGroup='SUPRA-Noida'
TM124=select CONCAT(timesheetdate, '-', timesheetdate + INTERVAL 6 DAY) as weekdates,t.timesheetstatus from user_task_mapping_table t,user a, user b where t.username=a.username and a.reportingmanager = b.username and t.timesheetdate between '$1' and '$2' and t.username='$3' group by WEEK(DATE_ADD(t.timesheetdate, INTERVAL(1-DAYOFWEEK(t.timesheetdate)) DAY)) order by weekdates
TM125=select username from user where primaryemail='$1'
TM126=select r.primaryemail from user u,user r where u.reportingManager=r.username and u.primaryemail='$1'
TM127=select count(1) from (select count(1) from user_task_mapping_table t,user u where t.username=u.username and t.timesheetstatus ='Pending' and u.reportingManager='$1' group by t.username,WEEK(DATE_ADD(t.timesheetdate, INTERVAL(1-DAYOFWEEK(t.timesheetdate)) DAY))) as t
TM128=select count(1) from (select count(1) from user_task_mapping_table t,user u where t.username=u.username and t.timesheetstatus ='Pending' and u.policygroup='$1' group by t.username,WEEK(DATE_ADD(t.timesheetdate, INTERVAL(1-DAYOFWEEK(t.timesheetdate)) DAY))) as t
TM129=select primaryemail from user where username=(select reportingmanager from user where username='$1')
TM130=SELECT e.username,salutation, firstName, middlename, lastName, motherName, fatherName, mothertongue, gender, dob, age, aadharNumber, pancard, passport, bloodgroup, maritalStatus, SpouseName, primaryPhoneNum, secondaryPhoneNum, emergencyPhoneNum, primaryEmailId, secondaryEmailId, webOrLinkedInLink,baselocation,department,designation,role,reportingperson,hrmanager,accountunit,e.joiningdate,e.lastworkingdate,w.policyGroup,a.empid,(select concat_ws(" ",firstname,lastname) from supra_emp where username=w.reportingPerson),(select concat_ws(" ",firstname,lastname) from supra_emp where username=w.hrmanager),(select usercode from user where username=e.username) FROM supra_emp e join supra_emp_current_work_info w on e.username=w.username left join supra_empid_username_mapping a on a.username=e.username where e.username='$1'
TM131=select reportingmanager from user where username = '$1'
TM132=SELECT addresstype,address, country, state, city, zipcode,addressid FROM supra_employee_address where username = '$1'
TM133=SELECT companyid, companyname, lastdesignation, durationMonth,endDate, startDate FROM supra_employement_history where username='$1'
TM134=SELECT id, name, `type`, version, experienceinmonth FROM supra_emp_technolgy_skill where username='$1'
TM135=SELECT type,qualification, schoolCollegeName,score,stream, universityBoard,year,eduid FROM supra_emp_education_history where username='$1'
TM136=SELECT accountid, AccountNo,accounttype, accountholdername, bankname, branchcode, ifsc,micrcode, primaryaccount FROM supra_emp_bank_account where username='$1'
TM137=INSERT INTO supra_emp_bank_account (username, bankname, ifsc, accounttype, micrcode, branchcode, primaryaccount, AccountNo, accountholdername) VALUES ('$1', '$2', '$3', '$4', '$5', '$6', '$7', '$8', '$9')
TM138=INSERT INTO supra_employement_history ( companyname, lastdesignation, durationMonth, startDate, endDate,username) VALUES ('$1', '$2', '$3', '$4', '$5', '$6')
TM139=INSERT INTO supra_emp_education_history (qualification, `type`, username, schoolCollegeName, universityBoard, stream, year, score) VALUES ('$1', '$2', '$3', '$4', '$5', '$6', '$7', '$8')
TM140=INSERT INTO supra_emp_technolgy_skill (username, name, `type`, version, experienceinmonth) VALUES ('$1', '$2', '$3', '$4', '$5')
TM141=UPDATE supra_emp SET salutation='$1',firstName='$2',middlename='$3',lastName='$4',motherName='$5',fatherName='$6',mothertongue='$7',gender='$8',dob='$9',age='$10',aadharNumber='$11',pancard='$12',passport='$13',bloodgroup='$14',maritalStatus='$15',SpouseName='$16',primaryPhoneNum='$17',secondaryPhoneNum='$18',emergencyPhoneNum='$19',primaryEmailId='$20',secondaryEmailId='$21',webOrLinkedInLink='$22',joiningDate='$23' WHERE username='$24'
TM142=UPDATE supra_emp_current_work_info SET baseLocation='$1', department='$2',designation='$3', role='$4', reportingPerson='$5', hrManager='$6', accountUnit='$7', policyGroup='$8', lastmodifieddate='$9',lastmodifiedby='$10' WHERE username='$11'
TM143=INSERT INTO supra_employee_address (username, address, addresstype, country, state, city, zipcode) VALUES ('$1', '$2', '$3', '$4', '$5', '$6', '$7') ON DUPLICATE KEY UPDATE address="$8", country='$9',state='$10', city='$11', zipcode='$12'
TM144=UPDATE supra_employee_address SET address='$1',addresstype='$2',country='$3',state='$4',city='$5',zipcode='$6' WHERE username='$7'
TM145=update supra_emp_bank_account set primaryaccount='N' where username='$1' and ifsc !='$2'
TM146=select count(1) from supra_emp_bank_account where username='$1' and ifsc ='$2'
TM147=delete from supra_emp_bank_account where AccountNo='$1'
TM148=delete from supra_emp_technolgy_skill where id='$1'
TM149=delete from supra_emp_education_history where eduid='$1'
TM150=delete from supra_employement_history where companyid='$1'
TM151=select p.ProjectName,s.Taskname,effortinhours,remark,t.timesheetdate,dayname(t.timesheetdate) from user_task_mapping_table t,task_story_table s,project_table p where t.projectid=p.projectid and t.taskid=s.taskid and username='$1' and timesheetdate between '$2' and '$3' order by t.timesheetdate asc
TM152=INSERT INTO supra_emp (username, firstName, lastName, primaryEmailId) VALUES ('$1', '$2', '$3', '$4')
TM153=INSERT INTO supra_emp_current_work_info (username, role, reportingPerson, hrManager,policyGroup) VALUES ('$1', '$2', '$3', '$4','$5')
TM154=select u.username,concat_ws(" ", u.firstname,u.lastname) as userfullname, u.primaryemail,(case when u.username in (select username from user_project_mapping_table where projectid='$1' and assignflag='Y') then 'Y' else 'N' end) as assignFlag from user u where u.policygroup='$2' order by userfullname
TM155=delete from user_project_mapping_table where projectid='$1'
TM156=INSERT INTO user_project_mapping_table (projectid, username, assignedby, assigneddate, assignFlag) VALUES ('$1', '$2', '$3', '$4', 'Y')
TM157=INSERT INTO supra_login_history (username, proxyloginby, loginlogoutflag) VALUES ('$1', '$2', '$3')
TM158=UPDATE user SET policyGroup='$1' WHERE username='$2'
TM159=UPDATE supra_emp SET middlename='$1',motherName='$2',fatherName='$3',mothertongue='$4',gender='$5',dob='$6',age='$7',aadharNumber='$8',pancard='$9',passport='$10',bloodgroup='$11',maritalStatus='$12',SpouseName='$13',primaryPhoneNum='$14',secondaryPhoneNum='$15',emergencyPhoneNum='$16',secondaryEmailId='$17',webOrLinkedInLink='$18',joiningDate='$19' WHERE username='$20'
TM160=UPDATE user SET role='$1',userstatus='$2',lastmodifieddate='$3',remark ='$4',reportingmanager='$5',hrmanager='$6' WHERE username='$7'
TM161=INSERT INTO supra_password_activation (email, activationcode) VALUES ('$1', '$2')
TM162=select email from supra_password_activation where activationcode='$1' and isactive='Y' and createdate > NOW() - INTERVAL 1 WEEK order by lastmodifiedon desc limit 1
TM163=select count(1) from supra_password_activation where activationcode='$1' and email='$2' and isactive='Y' and createdate > NOW() - INTERVAL 1 WEEK order by lastmodifiedon desc
TM164=update supra_password_activation set isactive='N' where activationcode='$1' and email='$2'
TM165=SELECT m.username,SUM(m.effortinhours) AS WeekEffort,m.timesheetstatus,CONCAT(m.timesheetdate, '-', m.timesheetdate + INTERVAL 6 DAY) AS week,concat_ws(" ", a.firstname,a.lastname) as fname,a.usercode,(select reportingmanager from user where username = m.username),(select concat_ws(" ",firstname,lastname) from user where username = (select reportingmanager from user where username = m.username)) FROM user_task_mapping_table m,user a where m.username=a.username $1 GROUP BY username,concat(year(m.timesheetdate),'/',week(DATE_ADD(m.timesheetdate, INTERVAL(1-DAYOFWEEK(m.timesheetdate)) DAY))) ORDER BY WEEK(m.timesheetdate)
TM166=INSERT INTO supra_user_assigned_task (username, taskid, assignedby, lastmodifiedby) VALUES ('$1', '$2', '$3', '$4') on duplicate key update username='$5', assignedby='$6', lastmodifiedby='$7'
TM167=select t.taskid,s.Taskname,s.Taskdesc,s.ProjectId,p.ProjectName,s.taskstatus,s.workprogress from supra_user_assigned_task t,task_story_table s,project_table p where t.taskid=s.taskid and s.projectid=p.projectid and t.username='$1' and s.taskstatus !='Completed'
TM168=update task_story_table set taskstatus='$1',workprogress='$2' where taskid='$3' 
TM169=update task_story_table set workprogress='$1' where taskid='$2'
TM170=select count(1) from supra_leave_request_mapping m,supra_leave_request l where m.requestnumber=l.requestnumber and ( '$1' between startdate and enddate ) and m.username='$2' and (l.status='Approved' or l.status='Pending')
TM171=select g.groupid,g.groupname,(case when g.groupid in (select groupid from supra_accessgroup_user_mapping where username='$1') then 'Y' else 'N' end) from supra_access_group g order by groupname
TM172=insert into supra_user_panel_display_list (panelid, username) values('$1','$2')
TM173=delete from supra_user_panel_display_list where panelid='$1' and username='$2'
TM174=insert into supra_user_quicklink (quicklinkid, username) values('$1','$2')
TM175=delete from supra_user_quicklink where quicklinkid='$1' and username='$2'
TM176=select panelid from supra_user_panel_display_list where username='$1'
TM177=select quicklinkid from supra_user_quicklink where username='$1'
TM178=select module,statuscount,status from VIEW_SUPRA_USER_STATUS where username='$1'
TM179=select module,sum(statuscount),status from VIEW_SUPRA_USER_STATUS where username in (select username from user where reportingmanager='$1' and username !='$2') group by module,status union select 'reimbursement',count(distinct(s.requestNumber)),'ApprovedByYou' from supra_rms_action_history s,supra_rms_action_history h  where s.requestnumber=h.requestnumber and s.actionby='$3' and s.username != '$4' and s.assignedto != h.username union select 'reimbursement',count(distinct(s.requestNumber)),'RejectedByYou' from supra_rms_action_history s,supra_rms_action_history h  where s.requestnumber=h.requestnumber and s.actionby='$5' and s.username != '$6' and s.assignedto = h.username union select 'reimbursement' AS `module`,count(1) AS `statuscount`,'Pending' AS `status` from supra_rms_approver_list l where l.currentassignflag='Y' and (l.userorgroup ='$7' or EXISTS (SELECT groupid FROM supra_accessgroup_user_mapping WHERE username='$8' and groupid=l.userorgroup)) 
TM180=select "User",count(1) as statuscount,userstatus from user where policygroup='$1' group by userstatus
TM181=select "Project",count(1) as statuscount,projectstatus from project_table group by projectstatus
TM182=delete from supra_accessgroup_user_mapping where groupid='$1' and username='$2'
TM183=select doc from supra_emp_scan_doc where username='$1' and docname='ProfileImage' order by lastmodifiedon desc limit 1
TM184=INSERT INTO supra_emp_scan_doc (docname, doctype, username, doc, lastmodifiedby) VALUES (:docName, :docType, :username, :doc, :username)
TM185=select doc from supra_emp_scan_doc where deleteflag='Y' and docname='ProfileImage' order by lastmodifiedon asc limit 1
TM186=INSERT INTO supra_empid_username_mapping (username, empid) VALUES ('$1', '$2') on duplicate key update empid='$3'
TM187=select t.timesheetdate,concat_ws(" ", u.firstname,u.lastname) as fullname,p.projectname,s.taskname,t.effortinhours,t.remark,t.lastmodifiedon,t.lastmodifiedon,(select concat_ws(" ", l.firstname,l.lastname) from user l where username=t.lastmodifiedby),concat_ws(" ", u2.firstname,u2.lastname),t.timesheetstatus,t.username from user_task_mapping_table t,user u,user u2,project_table p,task_story_table s where t.username=u.username and t.taskid=s.taskid and t.projectid=p.projectid and u.reportingmanager=u2.username and t.effortinhours > 0 and t.timesheetdate between '$1' and '$2' $3 order by fullname,t.timesheetdate,(s.taskname = 'On Leave') DESC, s.taskname ASC
TM188=select m.startdate,m.enddate,m.fulldayflag,r.status,r.createdon,r.lastmodifiedon,(select concat_ws(" ", l.firstname,l.lastname) from user l where username=r.lastmodifiedby),m.purpose,(select leavename from supra_leave_type where leavecode=m.leavecode) from supra_leave_request_mapping m,supra_leave_request r,user u where m.requestnumber=r.requestnumber and m.startdate >='$1' and m.endDate <='$2' and m.username='$3' order by m.startdate
TM189=INSERT INTO supra_mail_audit (email, actionitem) VALUES ('$1', '$2')
TM190=select username, firstname, lastname, role, primaryemail, usergroup, userstatus, dob, creationdate, lastmodifieddate,reportingmanager,hrmanager,(select concat_ws(' ',firstname,lastname) from user where username=u.reportingmanager),(select concat_ws(' ',firstname,lastname) from user where username=u.hrmanager),(select primaryphonenum from supra_emp where username=u.username),(select secondaryphonenum from supra_emp where username=u.username),usercode from user u where policygroup='$1' order by firstname
TM191=select username, firstname, lastname, role, primaryemail, usergroup, userstatus, dob, creationdate, lastmodifieddate,reportingmanager,hrmanager,(select concat_ws(' ',firstname,lastname) from user where username=u.reportingmanager),(select concat_ws(' ',firstname,lastname) from user where username=u.hrmanager),(select primaryphonenum from supra_emp where username=u.username),(select secondaryphonenum from supra_emp where username=u.username),usercode from user u where policygroup='$1' and userstatus='$2' order by firstname
TM192=UPDATE user SET firstname='$1',lastname='$2',role='$3',primaryemail='$4',userstatus='Active',dob='$5',reportingManager='$6',hrmanager='$7',joiningDate='$8',lastWorkingDate='$9',baselocation='$10',designation='$11',accountunit='$12',department='$13',policygroup='$14' WHERE username='$15'
TM193=select count(1) from user where username='$1' and reportingmanager='$2'
TM194=select count(1) from user where usercode='$1' or primaryemail='$2'
TM195=Select password,role,usergroup,userstatus,u.username,primaryemail,firstname,lastname,reportingmanager,hrmanager,accountunit,baselocation,designation,department,policygroup,usercode,m.clientid from user u,supra_emp_client_mapping m where u.username=m.username and primaryemail='$1' or usercode='$2'
TM196=select case when designation IS NULL or designation = '' then '-' else designation end as designation from supra_emp_current_work_info where username='$1' limit 1
TM197=update user set reportingmanager='$1' where username='$2'
TM198=update supra_emp_current_work_info set reportingperson='$1' where username='$2'
TM199=update user set hrmanager='$1' where username='$2'
TM200=update supra_emp_current_work_info set hrmanager='$1' where username='$2'
TM201=update user set baselocation='$1' where username='$2'
TM202=update supra_emp_current_work_info set baselocation='$1' where username='$2'
TM203=update user set department='$1' where username='$2'
TM204=update supra_emp_current_work_info set department='$1' where username='$2'
TM205=update user set DESIGNATION='$1' where username='$2'
TM206=update supra_emp_current_work_info set DESIGNATION='$1' where username='$2'
TM207=update user set ROLE='$1' where username='$2'
TM208=update supra_emp_current_work_info set ROLE='$1' where username='$2'
TM209=update user set accountunit='$1' where username='$2'
TM210=update supra_emp_current_work_info set accountunit='$1' where username='$2'
TM211=update user set policygroup='$1' where username='$2'
TM212=update supra_emp_current_work_info set policygroup='$1' where username='$2'
TM213=select count(1) from supra_accessgroup_user_mapping where username ='$1' and groupid in (select groupid from supra_accessgroup_modulefunction_mapping where functionid='$2') 
TM214=insert into supra_emp_client_mapping ('$1','$2');

TM215=INSERT INTO supra_emp_profile_image_metadata (imagePath, username, lastmodifiedby) VALUES ('$1', '$2', '$3')
TM216=select imagePath from supra_emp_profile_image_metadata where username='$1'
TM217=UPDATE supra_emp_profile_image_metadata SET imagePath='$1', lastmodifiedby='$2' where username = '$3'

#Leave Status
LEAVE_APPROVAL_PENDING=Approval Pending
LEAVE_REVERSAL=Reversal Pending
LEAVE_REVERSAL_APPROVED=Reversal Approved
LEAVE_APPROVED=Approved
LEAVE_REJECTED=Rejected
LEAVE_DELETED=Deleted

#Leave Management System Query
LMS1=select RequestNumber from supra_leave_request where username='$1' order by requestnumber desc limit 1
LMS2=select leavecode,leavename,leavedesc,applyByAdmin,applyByManager,applyByHR,maxDaysPerRequest from supra_leave_type where activeflag='Y' and policygroup='$1' order by leavecode
LMS3=select l.leaveyear,l.leavebalance,t.leavecode,t.leavename,t.leavedesc,t.cumulativegroup,t.applyByAdmin,t.applyByManager,t.applyByHR,t.maxDaysPerRequest,(select leavename from supra_leave_type where leavecode=t.cumulativegroup) as cumulativegroupname from supra_leave_type t  right join supra_leave_user_balance l on l.leavecode=t.leavecode where  l.username='$1' and l.leaveyear='$2' and t.activeflag='Y' and t.policygroup='$3' union select '$4',"NA",t.leavecode,t.leavename,t.leavedesc,t.cumulativegroup,t.applyByAdmin,t.applyByManager,t.applyByHR,t.maxDaysPerRequest,(select leavename from supra_leave_type where leavecode=t.cumulativegroup) as cumulativegroupname from supra_leave_type t where  t.activeflag='Y' and leavegroup="Unpaid" and t.policygroup='$5' union select '$6','0',t.leavecode,t.leavename,t.leavedesc,t.cumulativegroup,t.applyByAdmin,t.applyByManager,t.applyByHR,t.maxDaysPerRequest,(select leavename from supra_leave_type where leavecode=t.cumulativegroup) as cumulativegroupname from supra_leave_type t where t.activeflag='Y' and t.leavegroup="paid" and t.policygroup="$7" and t.leavecode  not in (select z.leavecode from supra_leave_user_balance z,supra_leave_type f where z.leavecode=f.leavecode and z.username='$8')
LMS4=INSERT INTO supra_leave_request (requestnumber, totaldays, username, createdon, createdby, approverRemark, `status`, lastmodifiedby, lastmodifiedon,leaveyear) VALUES ('$1', '$2', '$3', '$4', '$5', '$6', '$7', '$8', '$9','$10')
LMS5=INSERT INTO supra_leave_request_mapping (requestnumber, leavecode, username, startdate, enddate, requestedby, creationdate, purpose,noofdays,fulldayflag) VALUES ('$1', '$2', '$3', '$4', '$5', '$6', '$7', '$8','$9','$10')
LMS6=SELECT requestnumber, createdon, totaldays, status, approverRemark, lastmodifiedby,lastmodifiedon,username,username FROM supra_leave_request where username='$1' and status != 'Deleted' order by lastmodifiedon desc
LMS7=SELECT n.leavename, t.startdate, t.enddate,noofdays,t.purpose,fulldayflag,t.leavecode FROM supra_leave_request_mapping t,supra_leave_type n where t.leavecode=n.leavecode and t.requestnumber='$1' order by t.creationdate desc
LMS8=SELECT requestnumber, createdon, totaldays, status, approverRemark, lastmodifiedby FROM supra_leave_request where username='$1' order by lastmodifiedon desc
LMS9=SELECT t.requestnumber, t.createdon,t.totaldays,t.status,t.approverRemark,t.lastmodifiedby,t.lastmodifiedon,t.username,concat_ws(" ", u.firstname,u.lastname) as userfullname FROM supra_leave_request t,user u where t.username=u.username and u.reportingManager='$1'
LMS10=SELECT leavecode, leavename, addedby, addedon, leavedesc,policygroup,leavegroup,applybeforedays,maxDaysPerRequest,applyByAdmin,applyByManager,applyByHR,(select leavename from supra_leave_type where leavecode=t.cumulativegroup) as cumulativegroupname,activeflag,cumulativegroup  FROM supra_leave_type t order by policygroup,leavename
LMS11=UPDATE supra_leave_type SET activeFlag='N' WHERE leavecode='$1'
LMS12=UPDATE supra_leave_type SET leavename='$1',leavedesc='$2',applybeforedays='$3',maxDaysPerRequest='$4',activeflag='$5',applyByAdmin='$6',applyByManager='$7',applyByHR='$8',cumulativegroup='$9' WHERE leavecode='$10'
LMS13=INSERT INTO supra_leave_type (leavename, leavedesc,addedby, addedOn, activeFlag,policyGroup,leavegroup,applyBeforeDays,cumulativegroup,applyByAdmin,applyByManager,applyByHR,maxDaysPerRequest) VALUES ('$1', '$2', '$3','$4','Y','$5','$6','$7','$8','$9','$10','$11','$12')
LMS14=select count(1) from supra_leave_request_mapping where leavecode='$1'
LMS15=select b.leavebandid,t.leavedesc,b.quarterelyallotedleave,b.annualallotedleave,t.leavecode from supra_leave_band b,supra_leave_type t where b.leavecode=t.leavecode order by b.leavebandid, t.leavename
LMS16=update supra_leave_request set status='$1',approverremark='$2',lastmodifiedby='$3' where requestnumber='$4'
LMS17=update supra_leave_request set status='$1',userreversalremark='$2',lastmodifiedby='$3' where requestnumber='$4'
LMS18=select leavecode,noofdays,username from supra_leave_request_mapping where requestnumber='$1'
LMS19=select noofdays from supra_leave_request_mapping where requestnumber='$1' and leavecode='$2' limit 1
LMS20=select leavebalance from supra_leave_user_balance where username='$1' and leavecode='$2' order by leaveyear desc limit 1
LMS21=update supra_leave_user_balance set leavebalance='$1',lastmodifiedby='$2' where username='$3' and leavecode='$4' and leaveyear='$5'
LMS22=select leaveyear from supra_leave_user_balance where username='$1' and leavecode='$2' order by leaveyear desc limit 1
LMS23=select status from supra_leave_request where requestnumber='$1'
LMS24=select count(1) from supra_leave_request t,user u where t.username=u.username and t.status = 'approval pending' and u.policygroup='$1'
LMS25=select count(1) from supra_leave_request t,user u where t.username=u.username and u.reportingManager='$1' and t.status = 'approval pending'
LMS26=SELECT t.requestnumber, t.createdon,t.totaldays,t.status,t.approverRemark,t.lastmodifiedby,t.lastmodifiedon,t.username,concat_ws(" ", u.firstname,u.lastname) as userfullname FROM supra_leave_request t,user u where t.username=u.username and u.policygroup='$1'
LMS27=select distinct(leavecode) from supra_leave_type where policygroup='$1' and activeflag='Y' and leavegroup !='Unpaid' order by leavecode
LMS28=sum((CASE WHEN b.leavecode = '$1' THEN b.leavebalance END)) as "$2",
LMS29=SELECT $1 b.leavebandid, u.username,concat_ws(' ', u.firstname, u.lastname) as fullname,u.usercode FROM  user u left join supra_leave_user_balance b on b.username=u.username where u.userstatus='active' and u.policygroup='$2' group by u.username order by fullname
LMS30=select distinct(leavename) from supra_leave_type where activeflag='Y' and leavegroup !='Unpaid' and policygroup='$1' order by leavecode
LMS31=INSERT INTO supra_leave_user_balance (username, leavebandid, leavecode, leavebalance,totalallotedleave, leaveyear, balanceupdationflag) VALUES ('$1', '$2','$3', '$4', '0', '$5', 'Y') ON DUPLICATE KEY UPDATE leavebalance='$6',leavebandid='$7',balanceupdationflag='Y'
LMS32=select startdate from supra_leave_request_mapping where requestnumber='$1' order by startdate asc limit 1
LMS33=select u2.primaryemail from user u left join user u2 on u2.username=u.hrmanager where u.username='$1' 
LMS34=select username from supra_leave_request where requestnumber='$1' limit 1
LMS35=select l.leavecode,b.leavename,l.leavebalance,l.balanceupdationflag from supra_leave_user_balance l left join supra_leave_type b on l.leavecode=b.leavecode where username='$1' and leaveyear='$2' and b.activeflag='Y' and b.policygroup='$3' order by leavecode
LMS36=update supra_leave_user_balance set balanceupdationflag='$1' where username='$2' and leaveyear='$3'
LMS37=select m.startdate from supra_leave_request_mapping m, supra_leave_request r where m.requestnumber=r.requestnumber and m.username='$1' and r.leaveyear='$2' and status != 'Deleted' and status != 'Rejcted' order by m.creationdate
LMS38=select m.enddate from supra_leave_request_mapping m, supra_leave_request r where m.requestnumber=r.requestnumber and m.username='$1' and r.leaveyear='$2' and status != 'Deleted' and status != 'Rejcted' order by m.creationdate
LMS39=update supra_leave_user_balance set leavebalance='$1',leavebandid='$2',balanceupdationflag='Y' where username='$3' and leavecode='$4'
LMS40=select leavecode from supra_leave_type where leavegroup='Unpaid'
LMS41=select leavecode,applyBeforeDays,leavename from supra_leave_type where activeflag='Y' 
LMS42=select u.policygroup,concat_ws(' ', u.firstname, u.lastname) as fullname,u.primaryemail as mail,concat_ws(' ', u2.firstname, u2.lastname) as rmname,u2.primaryemail as rmmail,l.leavename,t.startdate,t.enddate,t.noofdays,t.creationdate,m.status,t.purpose from supra_leave_request_mapping t,supra_leave_type l,supra_leave_request m,user u,user u2 where t.leavecode=l.leavecode and m.requestnumber=t.requestnumber and t.username=u.username and u.reportingManager=u2.username and t.username='$1' and u.policygroup='$2' and m.status='$3' and t.startdate >= '$4' and t.enddate <= '$5' order by t.startdate
LMS43=select u.policygroup,concat_ws(' ', u.firstname, u.lastname) as fullname,u.primaryemail as mail,concat_ws(' ', u2.firstname, u2.lastname) as rmname,u2.primaryemail as rmmail,l.leavename,t.startdate,t.enddate,t.noofdays,t.creationdate,m.status,t.purpose from supra_leave_request_mapping t,supra_leave_type l,supra_leave_request m,user u,user u2 where t.leavecode=l.leavecode and m.requestnumber=t.requestnumber and t.username=u.username and u.reportingManager=u2.username and u.policygroup='$1' and m.status='$2' and t.startdate >= '$3' and t.enddate <= '$4' order by fullname asc,t.startdate asc
LMS44=select concat_ws(' ', firstname, lastname) as fullname,username from user where policygroup='$1' and userstatus='Active' order by fullname
LMS45=select u.policygroup,concat_ws(' ', u.firstname, u.lastname) as fullname,u.primaryemail as mail,concat_ws(' ', u2.firstname, u2.lastname) as rmname,u2.primaryemail as rmmail,l.leavename,t.startdate,t.enddate,t.noofdays,t.creationdate,m.status,t.purpose from supra_leave_request_mapping t,supra_leave_type l,supra_leave_request m,user u,user u2 where t.leavecode=l.leavecode and m.requestnumber=t.requestnumber and t.username=u.username and u.reportingManager=u2.username and t.username='$1' and u.policygroup='$2' and t.startdate >= '$3' and t.enddate <= '$4' order by t.startdate
LMS46=select u.policygroup,concat_ws(' ', u.firstname, u.lastname) as fullname,u.primaryemail as mail,concat_ws(' ', u2.firstname, u2.lastname) as rmname,u2.primaryemail as rmmail,l.leavename,t.startdate,t.enddate,t.noofdays,t.creationdate,m.status,t.purpose from supra_leave_request_mapping t,supra_leave_type l,supra_leave_request m,user u,user u2 where t.leavecode=l.leavecode and m.requestnumber=t.requestnumber and t.username=u.username and u.reportingManager=u2.username and u.policygroup='$1' and t.startdate >= '$2' and t.enddate <= '$3' order by fullname asc,t.startdate asc
LMS47=select l.leavegroup from supra_leave_type l,supra_leave_request_mapping m where l.leavecode=m.leavecode and m.requestnumber='$1' limit 1
LMS48=select m.startdate,m.enddate,m.fulldayflag,m.username from supra_leave_request_mapping m where m.requestnumber = '$1'
LMS49=INSERT INTO user_task_mapping_table (taskid, username, timesheetdate, effortinhours,timesheetstatus, lastmodifiedby, projectid, submitStatus) VALUES ('$1', '$2', '$3', '$4', '$5', '$6', '$7', '$8')
LMS50=select CASE timesheetstatus WHEN 'Pending' THEN timesheetstatus  WHEN 'Approved' THEN  timesheetstatus WHEN 'Saved' THEN timesheetstatus WHEN 'Rejected' THEN timesheetstatus ELSE 'NA' END from user_task_mapping_table where username='$1' and timesheetdate='$2' limit 1
LMS51=delete from user_task_mapping_table where username='$1' and taskid='$2' and timesheetdate between '$3' and $4'
LMS52=select count(1) from supra_accessgroup_modulefunction_mapping where functionid='1' and groupid in (select groupid from  supra_accessgroup_user_mapping where username=(select username from supra_leave_request where requestnumber='$1' limit 1))
LMS53=select (select concat_ws(' ', u.firstname, u.lastname) from user u where u.username='$1'),(select j.leavebandid from supra_leave_user_balance j where j.username='$2' and j.leavecode=p.leavecode),p.leavename,(select j.leavebalance from supra_leave_user_balance j where j.username='$3' and j.leavecode=p.leavecode),p.leavecode from supra_leave_type p where p.activeflag='Y' and p.leavegroup="Paid" and p.policyGroup=(select policygroup from user where username='$4') order by p.leavename
LMS54=INSERT INTO supra_leave_user_balance (username, leavebandid, leavecode, leavebalance, leaveyear, balanceupdationflag, lastmodifiedby) VALUES ('$1', '$2','$3','$4','$5','$6','$7') ON DUPLICATE KEY UPDATE leavebalance="$8", balanceupdationflag='$9',lastmodifiedby='$10'
LMS55=INSERT INTO supra_leave_meeting (requestnum, `type`, participent, toUser, ccUser, meetinglocation, meetingStarttime, meetingEndTime, message, subject, lastmodifiedby) VALUES ('$1', '$2', '$3', '$4', '$5', '$6', '$7', '$8', '$9', '$10', '$11')
LMS56=select m.subject,m.meetinglocation,concat_ws(' ', u.firstname, u.lastname),m.meetingstarttime,m.meetingendtime,m.lastmodifiedon,m.participent,m.toUser,m.ccUser,m.type from supra_leave_meeting m,user u where u.username=m.lastmodifiedby and requestnum='$1' order by m.lastmodifiedon desc
LMS57=select l.leavecode,l.leavename from supra_leave_type l where l.activeflag='Y' and l.leavegroup='Paid' and l.policygroup='$1' order by l.leavename
LMS58=select username,concat_ws(' ', firstname, lastname) as fullname,primaryemail from user where userstatus = 'Active' and policyGroup='$1' and username !='$2' order by fullname
LMS59=select username,concat_ws(' ', firstname, lastname) as fullname,primaryemail from user where userstatus = 'Active' and (reportingManager='$1' or hrmanager='$2') and username !='$3' order by fullname
LMS60=select w.policygroup,w.baseLocation,w.department,u.username,concat_ws(' ', u.firstname, u.lastname) as fullname,w.designation,u.reportingManager,u.usercode,(select usercode from user where username=u.reportingmanager),(select concat_ws(' ',firstname,lastname) from user where username=u.reportingmanager) from user u,supra_emp_current_work_info w where u.username=w.username and u.username = '$1' limit 1
LMS61=select hrmanager from supra_emp_current_work_info where username='$1' limit 1
LMS62=select leavecode,maxDaysPerRequest,leavename from supra_leave_type where activeflag='Y'
LMS63=update supra_leave_type set cumulativegroup='$1' where leavename='$2'
LMS64=select cumulativegroup from supra_leave_type where leavecode='$1' limit 1
LMS65=select leavecode from supra_leave_type where leavename='$1' limit 1
LMS66=select m.startdate,m.enddate,l.leavename,m.fulldayflag,m.username from supra_leave_request_mapping m,supra_leave_type l where l.leavecode=m.leavecode and m.requestnumber='$1'
LMS67=select concat_ws(' ', u.firstname, u.lastname) as fullname from supra_leave_request_mapping m,user u where m.username=u.username and m.username != '$1' and m.username in (select username from user_project_mapping_table where projectid='$2' and assignflag='Y') and u.policygroup='$3' and '$4' between m.startdate and m.enddate
LMS68=select m.username,m.projectid,p.projectname from user_project_mapping_table m,project_table p where m.projectid=p.projectid and m.username='$1' and assignflag='Y' and m.projectid != 'PSUPRA001' order by p.projectname
LMS69=select primaryemail,username,concat_ws(' ', firstname, lastname) as fullname from user where policygroup='$1' and userstatus='Active' and (primaryemail like '%$2%' or username like '%$3%' or firstname like '%$4%' or lastname like '%$5%')
LMS70=select distinct(concat_ws('--',(concat_ws(' ', u.firstname, u.lastname)),(concat_ws('_',u.primaryemail,r.status)))) as fullname from supra_leave_request_mapping m,supra_leave_request r,user u where m.requestnumber=r.requestnumber and m.username=u.username and m.username in (select username from user where username != '$1' and policygroup='$2') and '$3' between m.startdate and m.enddate
LMS71=delete from supra_leave_request where requestnumber='$1'
LMS72=delete from supra_leave_request_mapping where requestnumber='$1'
LMS73=select count(1) from user where username='$1' and reportingmanager='$2'
LMS74=select policygroup from supra_emp_current_work_info where username='$1' limit 1
LMS75=select (select leavename from supra_leave_type where leavecode=h.leavecode),h.leavebalance,h.updatedon,(CASE when h.balanceupdationflag='N' then 'System' else h.updatedby end) from supra_leave_update_balance_history h where h.username='$1' order by h.updatedon desc 

#Asset Management System Query
AST1=select u.username,concat_ws(' ', u.firstname, u.lastname) as fullname from supra_emp u,supra_emp_current_work_info w where u.username=w.username and w.policygroup='$1' order by fullname
AST2=select value from timesheet_parameter where category='Asset Type' order by value
AST3=select value from timesheet_parameter where category='Asset Status' order by value
AST4=INSERT INTO supra_asset (ASSTRFNUM, ASSETID, Category, Tag, Name, SerialNumber, `Status`, createdby, lastmodifiedby, createdon) VALUES ('$1', '$2', '$3', '$4', '$5', '$6', '$7', '$8', '$9','$10')
AST5=INSERT INTO supra_asset_allocation (ALLOCATIONRFNUM,ASSETID, username, startdate, enddate, allocatedby, allocatedon, lastmodifiedby) VALUES ('$1', '$2', '$3', '$4', '$5', '$6', '$7','$8')
AST6=INSERT INTO supra_asset_allocation_history (assetid, startdate, enddate, username,lastmodifiedby,assetstatus) VALUES ('$1','$2','$3','$4','$5','$6')
AST7=select distinct(tag) from supra_asset_category_tag_mapping where category='$1' order by tag
AST8=select ASSETID from supra_asset where category='$1' and tag='$2' and status='Available' order by assetid
AST9=select Name, SerialNumber, Status from supra_asset where assetid='$1'
AST10=select e.ASSETID,a.Name,a.`Status`,e.startdate,e.enddate,concat_ws(" ",u.firstname,u.lastname),concat_ws(" ",u2.firstname,u2.lastname),e.allocatedon,a.ASSTRFNUM,e.username from supra_asset a,supra_asset_allocation e,user u,user u2 where a.ASSETID=e.ASSETID and e.username=u.username and u2.username=e.allocatedby order by e.allocatedon desc
AST11=update supra_asset set status='Allocated',lastmodifiedby='$1' where assetid='$2'
AST12=delete from supra_asset_allocation where assetid=(select assetid from supra_asset where ASSTRFNUM='$1')
AST13=select assetid from supra_asset where ASSTRFNUM='$1'
AST14=update supra_asset set status='Available',lastmodifiedby='$1' where assetid='$2'
AST15=select count(1) from supra_asset where assetid='$1' 

#Attendance Managment System
ATN1=INSERT INTO supra_emp_attendance_logs (LOGTIME, EMPID, DIRECTION,C4,C5) VALUES ('$1', '$2', '$3','$4','$5')
ATN2=select min(a.logtime) as intime, max(a.LOGTIME),m.shifttime,m.username,CAST(max(a.LOGTIME) - min(a.LOGTIME) AS TIME),m.username,concat_ws(' ', u.firstname, u.lastname) as fullname from supra_emp_attendance_logs a,supra_empid_username_mapping m,user u where a.empid = m.empid and m.username=u.username and a.logtime between '$1' and '$2' and m.username in ($3) group by m.username,DATE(a.logtime) order by intime
ATN3=select distinct(date(logtime)),day(logtime),month(logtime),year(logtime) from supra_emp_attendance_logs where  LOGTIME between '$1' and '$2' order by logtime
ATN4=select min(a.logtime) as intime, max(a.LOGTIME),m.username,concat_ws(' ', u.firstname, u.lastname) as fullname from supra_emp_attendance_logs a,supra_empid_username_mapping m,user u where a.empid = m.empid and m.username=u.username and a.logtime between '$1' and '$2' and m.username='$3' group by DATE(a.logtime) order by intime
ATN5=select min(a.logtime),max(a.LOGTIME),m.username,concat_ws(' ', u.firstname, u.lastname) as fullname from supra_emp_attendance_logs a,supra_empid_username_mapping m,user u where a.empid = m.empid and m.username=u.username and a.logtime between '$1' and '$2' group by DATE(a.logtime) order by fullname,a.LASTMODITIME
ATN6=select m.empid,m.username,concat_ws(' ', u.firstname, u.lastname) as fullname from user u,supra_empid_username_mapping m where u.username=m.username and u.userstatus='Active' order by fullname
ATN7=select DATE(a.logtime),min(a.logtime) as intime, max(a.LOGTIME),m.shifttime,m.username,CAST(max(a.LOGTIME) - min(a.LOGTIME) AS TIME),m.username,concat_ws(' ', u.firstname, u.lastname) as fullname from supra_emp_attendance_logs a,supra_empid_username_mapping m,user u where a.empid = m.empid and m.username=u.username and a.logtime between '$1' and '$2' and m.username='$3' group by DATE(a.logtime) order by intime
ATN8=select m.empid,m.username,concat_ws(' ', u.firstname, u.lastname) as fullname from user u,supra_empid_username_mapping m where u.username=m.username and u.userstatus='Active' and u.username in (select distinct(username) from user_project_mapping_table where projectid='$1') order by fullname
ATN9=select distinct(username) from user where userstatus='Active'
ATN10=select distinct(username) from user_project_mapping_table where projectid='$1'
ATN11=select Date(min(a.logtime)),min(a.logtime) as intime, max(a.LOGTIME),m.username,concat_ws(' ', u.firstname, u.lastname) as fullname from supra_emp_attendance_logs a,supra_empid_username_mapping m,user u where a.empid = m.empid and m.username=u.username and a.logtime between '$1' and '$2' and m.username in ($3) group by DATE(a.logtime) order by m.username,intime
ATN12=select logdate,sum( TIMESTAMPDIFF(SECOND,intime,outtime)) as diff,userfullname,username from view_supra_attendence_data where logdate between '$1' and '$2' and username in ($3) group by Week(logdate),username order by username,logdate
ATN13=INSERT INTO supra_attendance_moaf (category,moafdate, direction, intime, outtime, username, createdby, lastmodifiedby, createdon,reason) VALUES ('$1', '$2', '$3', '$4', '$5', '$6', '$7', '$8','$9','$10')
ATN14=select status from supra_attendance_moaf where moafdate='$1' and username='$2' order by createdon desc limit 1 
ATN15=INSERT INTO supra_attendance_moaf (category,moafdate, direction, outtime, username, createdby, lastmodifiedby, createdon,reason) VALUES ('$1', '$2', '$3', '$4', '$5', '$6', '$7', '$8','$9')
ATN16=INSERT INTO supra_attendance_moaf (category,moafdate, direction, intime, username, createdby, lastmodifiedby, createdon,reason) VALUES ('$1', '$2', '$3', '$4', '$5', '$6', '$7', '$8','$9')
ATN17=SELECT username,username,moafdate, direction, intime, outtime, createdon,reason,status,category FROM supra_attendance_moaf where username='$1' order by lastmodifiedon desc
ATN18=SELECT concat_ws(' ', u.firstname, u.lastname),m.username,m.moafdate, m.direction, m.intime, m.outtime, m.createdon,m.reason,m.status,formrfnum,m.category FROM supra_attendance_moaf m,user u where m.username=u.username and m.status='Pending' and m.username !='$1' order by m.createdon
ATN19=update supra_attendance_moaf set status='$1',lastmodifiedby='$2' where formrfnum='$3'
ATN20=INSERT INTO supra_emp_attendance_logs (DIRECTION, LOGTIME, EMPID, deviceid) VALUES ('$1', '$2', '$3', '2')
ATN21=select m.direction,m.intime,m.outtime,e.empid from  supra_attendance_moaf m,supra_empid_username_mapping e where m.username=e.username and m.formrfnum='$1'
ATN22=select holidaydate,holidayname from supra_tms_holidays where holidaytype='MH' and holidaydate between '$1' and '$2' order by holidaydate
ATN23=select m.startdate,m.enddate,r.status from supra_leave_request_mapping m,supra_leave_request r where m.requestnumber=r.requestnumber and m.fulldayflag='Full day' and (r.status='Approved' or r.status='Approval Pending') and m.startdate >='$1' and m.endDate <='$2' and m.username='$3' order by m.startdate
ATN24=SELECT concat_ws(' ', u.firstname, u.lastname),m.username,m.moafdate, m.direction, m.intime, m.outtime, m.createdon,m.reason,m.status,formrfnum,m.category FROM supra_attendance_moaf m,user u,user u2 where m.username=u.username and u.reportingmanager=u2.username and u.reportingmanager='$1' and m.status='Pending' and m.username !='$2' order by m.createdon
ATN25=select concat_ws(' ', firstname, lastname) as fullname from user where username=(select reportingmanager from user where username='$1' limit 1) limit 1
ATN26=SELECT u.primaryemail,concat_ws(' ', u.firstname, u.lastname),m.moafdate, m.direction, m.intime, m.outtime, m.createdon,m.status,concat_ws(' ', u2.firstname, u2.lastname),m.reason FROM supra_attendance_moaf m,user u,user u2 where m.username=u.username and m.lastmodifiedby=u2.username and m.formrfnum='$1'
ATN27=select sum( TIMESTAMPDIFF(SECOND,intime,outtime)) as diff,userfullname,username from view_supra_attendence_data where logdate between '$1' and '$2' and username in ($3) group by username order by userfullname
ATN28=select distinct(username) from user where reportingmanager='$1'
ATN29=select distinct(username) from user where reportingmanager='$1' and username in (select username from user_project_mapping_table where projectid='$2')
ATN30=select count(1) from supra_emp_current_work_info where username='$1' and ( reportingperson='$1' or hrmanager='$3' ) 

#HRMS Constant
OFFER_LETTER=1
APPOINTMENT_LETTER=2
RELIEVING_LETTER=3
SALARY_SLIP=4


#HRMS
HRM1=SELECT distinct(`COLUMN_NAME`) FROM `INFORMATION_SCHEMA`.`COLUMNS` WHERE TABLE_NAME=(select docviewname from supra_hrms_document_type where docrfnum='$1' limit 1);
HRM2=select templatename from supra_emp_doc where docid='$1' 
HRM3=INSERT INTO hrms_emp_signin_signout (username, signinout, countrycode, countryname, city, region, postalcode, areacode, lattitue, longitude, lastmodifiedby,ipaddress) VALUES ('$1', 'SignIn', '$2', '$3', '$4', '$5', '$6', '$7', '$8', '$9', '$10','$11')
HRM4=INSERT INTO hrms_emp_signin_signout (username, signinout, countrycode, countryname, city, region, postalcode, areacode, lattitue, longitude, lastmodifiedby,ipaddress) VALUES ('$1', 'SignOut', '$2', '$3', '$4', '$5', '$6', '$7', '$8', '$9', '$10','$11')
HRM5=select count(1) from hrms_emp_signin_signout where username='$1' and DATE(punchtime) = CURDATE()
HRM6=INSERT INTO supra_emp_company_notification (`type`, title, descrition, lastmodifiedby, policyGroup) VALUES ('$1', '$2', '$3', '$4', '$5')
HRM7=select notificationrfnum from supra_emp_company_notification order by lastmodifiedon desc limit 1
HRM8=SELECT notificationrfnum, `type`, title, isActive, descrition, lastmodifiedby, policyGroup, lastmodifiedon, attachmentname	FROM supra_emp_company_notification where deleteflag='N' and policyGroup='$1'
HRM9=SELECT attachmentname, notificationrfnum, title, lastmodifiedby, lastmodifiedon, isactive, docextension, attachment FROM supra_emp_company_notification where notificationrfnum='$1'
HRM10=INSERT INTO supra_emp_scan_doc (docname, doctype, username, lastmodifiedby) VALUES ('$1', '$2', '$3', '$4')
HRM11=select h.username,concat_ws(' ', u.firstname, u.lastname) as fullname,h.city,h.region,h.postalcode,date(punchtime),time(min(punchtime)),time(max(punchtime)) from hrms_emp_signin_signout h,user u where h.username=u.username and date(punchtime) >= '$1' and date(punchtime) <= '$2' and h.username='$3' group by date(punchtime) order by date(punchtime)
HRM12=update supra_emp_company_notification set isActive='N',deleteflag='Y' where notificationrfnum='$1'
HRM13=update supra_emp_company_notification set title="$1",descrition='$2',lastmodifiedby='$3' where notificationrfnum='$4'
HRM14=update supra_emp_company_notification set isactive='$1' where notificationrfnum='$2'
HRM15=select templatedata from supra_hrms_template_master where templaterfnum='$1' limit 1
HRM16=call SUPRA_HRMS_PROC_INSERT_DOC_TEMPLATE ('$1', '$2', '$3', '$4', '$5', '$6', '$7')
HRM17=select groupname from supra_hrms_policygroup_rolegroup_template where policygroup='$1'
HRM18=select d.docname,d.docrfnum from supra_hrms_document_type d where d.policygroup='$1' and d.isactive='$2' order by d.docname
HRM19=select t.templatename,t.templaterfnum from supra_hrms_template_master t,supra_hrms_policygroup_document_template pd,supra_hrms_policygroup_rolegroup_template prt where t.templaterfnum=pd.templaterfnum and pd.pdtrfnum=prt.pdtrfnum and pd.docrfnum='$1' and prt.policygroup='$2' order by t.templatename
HRM20=INSERT INTO supra_hrms_generated_doc (username, fullname, createdby, docname, docdata,personalemail) VALUES ('$1', '$2', '$3', '$4', '$5','$6')
HRM21=SELECT hrdrfnum, username, fullname,personalemail,docname, createdby, createdon FROM supra_hrms_generated_doc where activeflag='$1'
HRM22=select docdata from supra_hrms_generated_doc where hrdrfnum = '$1' limit 1 
HRM23=update supra_hrms_generated_doc set activeflag='N' where hrdrfnum = '$1'
HRM24=update supra_hrms_generated_doc set docdata='$1' where hrdrfnum = '$2'

#Payroll
PAY1=select concat_ws(' ',firstname,lastname) from user where username in (:empcodelist)
PAY2=select usercode from user where username in (:empcodelist)


#Mobile
M11=select u1.username as empId, u1.firstname as empName,u2.username as managerId, CONCAT(u2.firstname," ", u2.lastname) as managerName,u3.username as hrmId, CONCAT(u3.firstname," ", u3.lastname) as hrmName,u1.primaryemail as primaryemail, u1.firstname as firstname, u1.lastname as lastname, u1.password as password, u1.role as role, u1.usergroup as usergroup, u1.userstatus as userstatus, u1.accountunit as accountunit, u1.baselocation as baselocation,u1.designation as designation, u1.department as department, u1.policygroup as policygroup, u1.usercode as usercode, m.clientid as clientid from user u1, user u2, user u3, supra_emp_client_mapping m where u1.username=m.username AND u2.username = u1.reportingManager AND u3.username = u1.hrManager AND u1.primaryemail = '$1';
M12=select sagum.username, samf.functionid,smf.functionname,smf.moduleid,sam.modulename from supra_accessgroup_user_mapping as sagum, supra_accessgroup_modulefunction_mapping as samf,supra_module_function as smf, supra_app_module as sam where username='$1'AND samf.groupid = sagum.groupid AND	samf.functionid = smf.functionid AND smf.moduleid=sam.moduleid AND smf.moduleid in('$2','$3')  
M13=select * from restPanelStatusName where panelId in ( select panelid from supra_user_panel_display_list where username='$1')
M14=SELECT q.quicklinkid,r.quicklinkname FROM restquicklink as r ,supra_user_quicklink as q where q.username='$1' AND q.viewflag='Y' AND q.quicklinkid=r.quicklinkid
M15=select Count(*) from restToken where token='$1';
M16=SELECT notificationrfnum,title FROM rolemanagement.supra_emp_company_notification where policyGroup = (select policyGroup from user where userName='$1') AND  isActive='Y'
M19=select doctype from supra_emp_scan_doc where username='$1' order by lastmodifiedon desc limit 1;
M20=select pm.username,pt.ProjectId,pt.ProjectName,pt.projectstatus, ts.TaskId,ts.Taskname from project_table as pt, user_project_mapping_table as pm, task_story_table as ts where pt.projectid=pm.projectid AND pm.username='$1' AND pt.projectstatus='Active' AND ts.taskstatus='Active' AND ts.Projectid = pt.ProjectId order by pt.ProjectId;
